{
    "contents" : "library(dplyr)\nlibrary(RNeo4j)\nlibrary(ggplot2)\nlibrary(rCharts)\n###################### [Load Graph] ########################\ngraph = startGraph(\"http://localhost:7474/db/data/\", \n                   username = 'neo4j',\n                   password =  'password')\n###################### [/Load Graph] ########################\n\n###################### [Analysis] ########################\n#1. Question: Who has published the most articles\n#a. Get Data with Cypher query\nq1 = \"MATCH (a:Author) -[w:WROTE]-> (p:Paper)\n      RETURN a.name AS Name, COUNT(p) AS Count, MAX(w.year) - MIN(w.year) AS Long_Score\n      ORDER BY COUNT(p) DESC LIMIT 26\"\nq1_results = cypher(graph, q1)[-1,] #Q1 Data\n\n#b. Visualize Results\nq1 <- rCharts:::Highcharts$new()\nq1$chart(zoomType = \"xy\", type = 'bar')\nq1$xAxis(categories = q1_results$Name, title = list(text=\"Authors\"))\nq1$title(text=\"Most Published Authors\")\nq1$series(data = q1_results$Long_Score, name = \"Longevity Score (years)\", legendIndex = 2 )\nq1$series(data = q1_results$Count, name = \"Publication Count\", legendIndex = 1)\nq1$show()\n\n#Q2. Who are the Rising Stars in the Field? \nq2 = \"MATCH (a:Author) -[w:WROTE]-> (p:Paper)\n      RETURN a.name AS Name, COUNT(p) AS Count, MAX(w.year) - MIN(w.year) AS Long_Score\n      ORDER BY COUNT(p) DESC\"\n      \nq2_results = cypher(graph, q2)[-1,] #Q2 Data\n# Filter results in dplyr for long_score <= 5 and order in desc with most citation counts\nq2_results <- (q2_results %>% filter(Long_Score <= 5) %>% arrange(desc(Count)))[1:25,] #Data\n\n#b. Visualize Results\nq2 <- rCharts:::Highcharts$new()\nq2$chart(zoomType = \"xy\", type = 'bar')\nq2$xAxis(categories = q2_results$Name, title = list(text=\"Authors\"))\nq2$title(text=\"Rising Stars Authors\")\nq2$series(data = q2_results$Long_Score, name = \"Longevity Score (years)\", legendIndex = 2 )\nq2$series(data = q2_results$Count, name = \"Publication Count\", legendIndex = 1)\nq2$show()\n\n#Q3. Which Author was the most socialable? \nq3 <- \"MATCH (a:Author) -[WROTE]-> (p:Paper)<-[WRITTEN_BY]- (o:Author)\n       RETURN a.name as Name, 1 + COUNT(DISTINCT(o)) as Social_Score\n       ORDER BY Social_Score DESC\n       LIMIT 25\"\nq3_results = cypher(graph, q3) #Q3 Data\n\n#b. Visualize Results\nq3 <- rCharts:::Highcharts$new()\nq3$chart(zoomType = \"xy\", type = 'bar')\nq3$xAxis(categories = q3_results$Name, title = list(text=\"Authors\"))\nq3$yAxis(title = list(text = \"Score\"))\nq3$title(text=\"Most Socialble Authors\")\nq3$series(data = q3_results$Social_Score, name = \"Socialbility Score\")\nq3$show()\n\n#Q4: Which Journal have on average the most cited papers?\nq4 <- \"MATCH (j:Journal) -[PUBLISHED_PAPER]->(p:Paper)<-[c:CITED_BY] - (o:Paper)\n       RETURN j.name as Journal, p.title as Paper, COUNT(o) as Citations\"\nq4_results = cypher(graph, q4) #Q4 Data\nq4_results <- q4_results %>% group_by(Journal) %>% \n              summarise(paper_count = n(), \n                        c_count = sum(Citations), \n                        avg_cits = round(c_count / paper_count,2)) %>%\n              filter(paper_count > 70) %>%\n              arrange(desc(avg_cits))\nq4_results <- q4_results[1:10,]\n\n#b. Visualize Results\nq4 <- rCharts:::Highcharts$new()\nq4$chart(zoomType = \"xy\", type = 'bar')\nq4$xAxis(categories = q4_results$Journal, title = list(text=\"Authors\"))\nq4$yAxis(title = list(text = \"Avg. Citations per Paper\"))\nq4$title(text=\"Top Journals Based on Avg Citations\")\nq4$series(data = q4_results$avg_cits, name = \"Avg. Citations\")\nq4$show()\n###################### [/Analysis] ########################\n\n# Save data to RData object\nsave(q1_results, q2_results, q3_results, q4_results, file = \"finalproject/data.RData\")",
    "created" : 1431559428707.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2999660628",
    "id" : "F7B959C0",
    "lastKnownWriteTime" : 1431553779,
    "path" : "~/Documents/workspace/cs63/finalproject/code/analysis.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}